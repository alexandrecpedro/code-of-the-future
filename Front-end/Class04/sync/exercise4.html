<!-- EXERCISE 4
Francisco precisa de um sistema para gerenciar sua escola.
Neste sistema, precisamos capturar o aluno com as seguintes informações:

aluno
    - nome
    - matrícula
    - notas

As notas podem ser quantas o sistema quiser, ou seja, deixe o usuário escolher a
quantidade de notas.
Neste sistema você precisará de um menu onde fará o:
- cadastro de alunos, digitando nome, matrícula e notas.
- emissão de relatório, o qual mostrará a lista de alunos com
nome, matrícula, notas, média, aprovado/reprovado/recuperação

Critério de avaliação:
    - aprovado: nota >= 7
    - recuperação: 5 <= nota < 7
    - reprovado: nota < 5

Use o paradigma de Orientação a Objetos
-->

<script>
    class Aluno {
        /** ATTRIBUTES **/

        /** CONSTRUCTOR **/
        constructor() {
            this.nome = "";
            this.matricula = "";
            this.notas = [];
        }

        /** METHODS **/
        media() {
            return (this.notas.reduce((valorAtual, nota) => valorAtual + nota, 0) / this.notas.length).toFixed(2);
        }

        situacao() {
            const mediaCalculada = this.media();
            if (mediaCalculada >= 7) return "Aprovado";
            else if (mediaCalculada >= 5) return "Recuperação";
            else return "Reprovado";
        }
    }

    const appNotas = {}

    appNotas.alunos = []

    appNotas.mostrarAlunos = () => {
        let msg = ""
        for (let i = 0; i < appNotas.alunos.length; i++) {
            let aluno = appNotas.alunos[i]
            msg += `
            ${appNotas.mostrarAluno(aluno)}
            --------------------------------
        `
        }

        alert(msg)
    }

    appNotas.mostrarAluno = (aluno) => {
        return `
        Aluno: ${aluno.nome}
        Matrícula: ${aluno.matricula}
        Quantidade de Notas: ${aluno.notas.join(", ")}
        Média Final: ${aluno.media()}
        Situação: ${aluno.situacao()}
    `
    }

    appNotas.cadastroAluno = () => {
        const aluno = new Aluno()

        aluno.nome = prompt("Qual o nome do aluno?")
        aluno.matricula = prompt("Digite o número da matrícula:")
        aluno.notas = []

        let qtdNotas = Number(prompt("Quantas notas o aluno teve?"))
        let soma = 0
        for (let i = 0; i < qtdNotas; i++) {
            let nota = Number(prompt(`Digite o valor da nota ${i + 1}:`))
            aluno.notas.push(nota)
            soma += nota
        }

        const confirmacao = confirm(`
            Salvar estas informações?
            ${appNotas.mostrarAluno(aluno)}
        `)

        if (confirmacao) {
            appNotas.alunos.push(aluno)
        }
    }

    appNotas.menu = () => {
        let opcao = prompt(
            "Cadastrar novo(a) aluno(a)\n\n" +
            "Escolha uma opção:\n" +
            "1. Cadastrar\n" +
            "2. Exibir relatório de alunos\n" +
            "3. Sair"
        )

        switch (opcao) {
            case "1":
                appNotas.cadastroAluno()
                break
            case "2":
                appNotas.mostrarAlunos();
                break
            case "3":
                return
            default:
                alert("Opção inválida!")
        }

        appNotas.menu()
    }

</script>
<h1>Bem vindo ao programa de alunos</h1>
<button onclick="appNotas.menu()">Iniciar programa</button>